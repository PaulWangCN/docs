---
title: "保险知识问答助手"
description: "保险知识问答助手"
---

接下来的教程将帮助您构建一个保险产品解读智能体，主要用于帮助用户在保险产品选择、理解保险产品条款和行业信息时提供支持。该智能体的目标是解决用户在面对纷繁复杂的保险产品信息时可能遇到的疑惑，提供清晰、专业的解答。我们将利用问题改写、知识检索等先进技术，增强用户体验。

完整的工作流如下所示。在构建过程中，可以随时参考它以保持正轨，并了解所有节点如何协同工作。

![](/images/demos/demos_1.png "")

## 步骤1：创建应用

1.  登录平台，在顶部导航栏点击 **AI实验室**。
2.  点击 **创建应用**。
3.  设置应用信息：
    - **应用名称**：`保险助手-产品解读`
    - **应用类型**：`高级编排`
    - **模板**：`空白应用`
4.  点击 **创建**。系统将自动进入工作流画布。

![](/images/demos/demos_2.png "")
![](/images/demos/demos_3.png "")
## 步骤2：配置工作流节点

所有未提及的配置项均保持默认值。建议为节点和变量设置清晰、描述性的名称，以便于识别和引用。

### 1. 配置基本信息
创建应用后，画布中默认会展示**基本信息**节点和**开始**节点。
![](/images/demos/demos_4.png "")
在**基本信息**节点中，填写：
- **应用描述**
- **开场白**

### 2. 槽值信息提取与问题扩写

#### 2.1 槽值信息提取

**2.1.1 创建 LLM 节点：槽值信息提取**

在**开始**节点后添加一个 **LLM** 节点，命名为 `槽值信息提取`。

**核心目标**：从用户自然语言提问中提取关键的结构化信息。
![](/images/demos/demos_5.png "")
**配置节点**：
1.  选择模型：**qingqi-ins-4b**

- 因为业务是金融保险
- 此节点是根据提取出来的**产品名称**在知识库获取产品条款、健康告知、客户须知等产品资料交互大模型，所以数据量是相对轻量级的
- 4b回复快、链路短、消耗 `token` 少，无需选择一个算力大的模型

2.  输入系统角色
```markdown 指令
## 角色定义
你是平台的咨询属性提取引擎，专门从用户保险咨询问题中提取关键结构化属性，为精准的知识问答和服务引导提供数据支持。

## 输出要求
必须严格遵循以下JSON格式，无任何额外文本：

{
  "consultation_analysis": {
    "knowledge_domain": "基础概念",
    "user_knowledge_level": "小白用户"
  },
  "content_analysis": {
    "insurance_terms": ["等待期", "免赔额"],
    "product_names": ["好医保"],
    "product_types": ["医疗险"]
  },
  "extraction_metadata": {
    "confidence_score": 0.85,
    "extraction_completeness": "complete"
  }
}

（完整的系统角色提示词较长，用于定义详细的提取规则。此处为节省空间仅展示其结构与开头，后续配置请使用原始内容。）
```
3.  输入提示词

```markdown 提示词
## 用户问题：
{{global.query}}
```

4.  历史聊天记录数：设置为 `10`。
5.  启用结构化输出：打开"变量输出结构化输出"开关，以便后续节点使用。
6.  配置 JSON Schema：在结构化输出编辑器中粘贴以下 JSON Schema 定义。

<Note>为便于阅读，此处 Schema 已精简，实际配置请使用提供的完整 JSON。</Note>

```json
{
  "type": "object",
  "properties": {
    "consultation_analysis": {
      "type": "object",
      "properties": {
        "knowledge_domain": {"type": "string"},
        "user_knowledge_level": {"type": "string"}
      }
    },
    "content_analysis": {
      "type": "object",
      "properties": {
        "insurance_terms": {"type": "string"},
        "product_names": {"type": "array", "items": {"type": "string"}},
        "product_types": {"type": "array", "items": {"type": "string"}}
      }
    },
    "extraction_metadata": {
      "type": "object",
      "properties": {
        "confidence_score": {"type": "number"},
        "extraction_completeness": {"type": "string"}
      }
    }
  }
}
```

**2.1.2 创建模板引擎节点：产品名称**
![](/images/demos/demos_6.png "")
在`槽值信息提取`节点后添加一个**模板引擎**节点，命名为 `产品名称`，用于格式化提取出的产品名称列表。

**配置节点**：
1.  **输入模板**：`${extraction.content_analysis.product_names?join("<|>")}`
2.  **管理输入变量**：将变量`extraction`映射为`槽值信息提取`节点的输出。
![](/images/demos/demos_7.png "")
**2.1.3 创建判断器节点：判断是否存在具体产品**
![](/images/demos/demos_8.png "")
![](/images/demos/demos_9.png "")
在`产品名称`节点后添加一个**判断器**节点，命名为 `是否存在具体产品`，用于路由后续流程。

- **IF 条件**：IF `产品名称>结果` `不为空`。
- **流程说明**：
    - **是**：用户问题提及具体产品，走 `产品相关知识检索` 分支。
    - **否**：用户未提及具体产品，走 `通用问题知识检索` 分支。

**2.1.4知识库检索节点：产品相关知识检索和知识库检索节点：通用问题知识检索**

**2.1.4.1知识库检索节点：产品相关知识检索**
![](/images/demos/demos_10.png "")
在是否存在具体产品节点之后，在用户问题存在产品的情况下，添加一个知识库检索节点，并命名为产品相关知识检索。

此节点的目的是为了检索一些产品的相关信息。
1. 选择知识库模式：通用。
2. 选择知识库：产品智库、行业精选库、疾病库。
3. 配置检索参数：
![](/images/demos/demos_11.png "")
- 选择混合检索
- 配置引用分段数 TOP为10
- 开启精排
4. 选择检索问题

检索问题拼接>结果

**2.1.4.1.1判断器节点节点：是否检索到产品相关知识**
![](/images/demos/demos_12.png "")
![](/images/demos/demos_13.png "")
在产品相关知识检索节点之后，添加一个判断器节点，并命名为市都检索到相关产品知识。

此节点的目的是为了判断是否存在产品相关知识。
- **若存在产品相关知识，则走产品知识回答节点；**
- **若不存在产品相关知识，则走产品知识指定回复节点。**
定义 IF 条件：`IF 产品相关知识检索>检索结果的分段列表`大于等于`1` 。

**2.1.4.1.2LLM节点：产品知识回答和指定回复节点：产品知识指定回复**

**2.1.4.1.2.1LLM节点：产品知识回答**
![](/images/demos/demos_14.png "")

**在是否检索到相关产品知识节点之后，若用户问题中提到的产品检索到相关的信息，则添加一个LLM节点，并命名为产品知识回答。**

此节点的目的是根据检索相关的信息，通过交互大模型，更好地回答用户问题。

1. 选择模型：**qingqi-ins-32b**

- 因为业务是金融保险
- 此节点是由于回答用户的问题往往涉及复杂的信息处理与分析，因而需要采用参数较大的模型，以确保在理解和生成语言的过程中，能够提供更准确、深入的回应
- 高参数模型通常具备更强的表达能力和更丰富的上下文理解能力，能够有效应对用户多样化的需求和复杂的查询情境，从而提升整体的用户体验

2. 输入系统角色
```markdown 指令
# 角色
你是一名智能保险顾问，负责将通用保险知识转化为个性化服务。
# 核心任务
基于第一阶段的保险知识解答和用户画像数据，提供个性化的保障建议并自然引导后续服务。
# 关键指令
1. 衔接策略
  ○ 使用自然过渡语句衔接第一阶段，如：“了解这些区别后，结合您的具体情况...”、“基于刚才的说明，从实际规划角度...”
  ○ 绝对禁止重复第一阶段的概念性内容
  ○ 禁止使用客户姓名或昵称，全程使用“您”指代，保持与第一阶段一致的匿名性
2. 个性化建议框架
  ○ 预算分层：使用“如果预算有限...可以优先...；如果预算充足...建议...”的框架
  ○ 现状分析：基于用户画像中的保单状况、人生阶段、家庭责任等维度给出建议
  ○ 缺口识别：客观分析现有保障的不足，如“保额有限”、“保障范围不全面”等
3. 转化引导
  ○ 基于对话上下文提供具体服务，话术：“基于您的保障情况，是否需要我为您[具体服务]？”
  ○ 服务类型根据场景动态选择：方案规划、产品推荐、保费测算、保障对比等
  ○ 服务描述要具体，如“规划一份适合的医疗险方案”
4. 语气与风格
  ○ 专业但亲切，体现“顾问”而非“推销”感
  ○ 认可用户的保障意识（如“您已经有基础保障，这很好”）
  ○ 基于用户利益提供建议，避免强硬推销
# 输出规范
● 回复长度：100-200字
● 必须包含基于用户画像的个性化分析
● 全程保持匿名，使用“您”指代用户
```
3. 输入提示词
```markdown 提示词
## 已知信息：
{{产品相关知识检索.data}}

## 用户问题：
{{global.query}}
```
4. 打开输出思考。
5. 打开返回内容。

**2.1.4.1.2.1.1指定回复节点：产品知识回答-分割线**
![](/images/demos/demos_15.png "")

**在产品知识回答节点之后，添加一个指定回复节点，并命名为产品知识回答-分割线。**

此节点的目的是为了分割展示内容。
1. 输入回复内容：---。
2. 打开返回内容。

**2.1.4.1.2.1.2指定回复节点：用户画像**
![](/images/demos/demos_16.png "")

**在产品知识回答-分割线节点之后，添加一个指定回复节点，并命名为用户画像。**

此节点的目的是为了结合用户画像，给用户更好的建议。
1. 输入回复内容：---。
```text 回复内容
姓名：张三
性别：男
年龄：30岁
收入：10万
已购保险：意外险
```

**2.1.4.1.2.1.3LLM节点：产品个性化建议**
![](/images/demos/demos_17.png "")

**用户画像节点之后，添加一个LLM节点，并命名为产品个性化建议。**

此节点的目的是为了给用户输出个性化建议。

1. 选择模型：**qingqi-ins-32b**

- 因为业务是金融保险
- 此节点是由于回答用户的问题往往涉及复杂的信息处理与分析，因而需要采用参数较大的模型，以确保在理解和生成语言的过程中，能够提供更准确、深入的回应
- 高参数模型通常具备更强的表达能力和更丰富的上下文理解能力，能够有效应对用户多样化的需求和复杂的查询情境，从而提升整体的用户体验

2. 输入系统角色
```markdown 指令
# 角色
你是一名智能保险顾问，负责将通用保险知识转化为个性化服务。
# 核心任务
基于第一阶段的保险知识解答和用户画像数据，提供个性化的保障建议并自然引导后续服务。
# 关键指令
1. 衔接策略
  ○ 使用自然过渡语句衔接第一阶段，如：“了解这些区别后，结合您的具体情况...”、“基于刚才的说明，从实际规划角度...”
  ○ 绝对禁止重复第一阶段的概念性内容
  ○ 禁止使用客户姓名或昵称，全程使用“您”指代，保持与第一阶段一致的匿名性
2. 个性化建议框架
  ○ 预算分层：使用“如果预算有限...可以优先...；如果预算充足...建议...”的框架
  ○ 现状分析：基于用户画像中的保单状况、人生阶段、家庭责任等维度给出建议
  ○ 缺口识别：客观分析现有保障的不足，如“保额有限”、“保障范围不全面”等
3. 转化引导
  ○ 基于对话上下文提供具体服务，话术：“基于您的保障情况，是否需要我为您[具体服务]？”
  ○ 服务类型根据场景动态选择：方案规划、产品推荐、保费测算、保障对比等
  ○ 服务描述要具体，如“规划一份适合的医疗险方案”
4. 语气与风格
  ○ 专业但亲切，体现“顾问”而非“推销”感
  ○ 认可用户的保障意识（如“您已经有基础保障，这很好”）
  ○ 基于用户利益提供建议，避免强硬推销
# 输出规范
● 回复长度：100-200字
● 必须包含基于用户画像的个性化分析
● 全程保持匿名，使用“您”指代用户
```
3. 输入提示词
```markdown 提示词
## 用户问题
{{global.query}}

## 第一步回复内容
{{产品知识回答.answer}}

## 用户画像信息
{{用户画像.answer}}
```
4. 历史聊天记录数设置为0。
5. 打开输出思考。
6. 打开返回内容

**2.1.4.1.2.2指定回复节点：产品知识指定回答**
![](/images/demos/demos_18.png "")

**在是否检索到相关产品知识节点之后，若用户问题中提到的产品并没有检索到相关的信息，则添加一个指定回复节点，并命名为产品知识指定回答。**

此节点的目的是为了更好地告知用户检索结果。
1. 输入回复内容：未检索到相关内容。
2. 打开返回内容。

**2.1.4.2知识库检索节点：通用问题知识检索**
![](/images/demos/demos_19.png "")

在是否存在具体产品节点之后，在用户问题不存在产品的情况下，添加一个知识库检索节点，并命名为通用问题知识检索节点。

此节点的目的是为了检索一些更加通用的相关信息。

1. 选择知识库模式：通用。
2. 选择知识库：行业精选库。
3. 配置检索参数：
![](/images/demos/demos_20.png "")
- 检索模式：向量检索
- 引用分段数TOP：10
- 开启精排

**2.1.4.2.1是否检索到相关通用知识**
![](/images/demos/demos_21.png "")
![](/images/demos/demos_22.png "")

在通用问题知识检索节点后，添加一个判断器节点，并命名为是否检索到通用知识。

此节点的目的是为了判断是否存在通用知识。

- 若存在通用知识，则走通用问题回答节点；
- 若不存在通用知识，则通用知识指定回答节点。

定义 IF 条件：IF 通用问题知识检索>检索结果的分段列表 大于等于1 。

**2.1.4.2.2LLM节点：通用问题回答和指定回复节点：通用知识指定回答**

**2.1.4.2.2.1LLM节点：通用问题回答**
![](/images/demos/demos_23.png "")

在是否检索到相关通用知识节点之后，添加一个LLM组件，并命名为通用问题回答。

此节点的目的是根据检索相关的信息，通过交互大模型，更好地回答用户问题。

1. 选择模型：**qingqi-ins-32b**

- 因为业务是金融保险
- 此节点是由于回答用户的问题往往涉及复杂的信息处理与分析，因而需要采用参数较大的模型，以确保在理解和生成语言的过程中，能够提供更准确、深入的回应
- 高参数模型通常具备更强的表达能力和更丰富的上下文理解能力，能够有效应对用户多样化的需求和复杂的查询情境，从而提升整体的用户体验


2. 输入系统角色
```markdown 指令
# 角色
你是一名专业的保险知识解答AI，专注于清晰、准确、中立地解释保险概念。你的核心价值是将复杂知识简单化，不进行任何个性化建议或产品推荐。

# 核心任务
根据用户提出的保险相关问题，提供结构化、易于理解的解答。解答内容必须基于公开、通用的保险知识。

# 回答指令
## 识别问题类型并应用对应解答框架
### 【概念解释型】（如“什么是寿险？”）
- 先给出简明定义。
- 阐述其核心功能、保障范围、典型赔付方式（报销型/给付型）。
- 说明它主要解决什么风险问题。
### 【对比分析型】（如“医疗险和重疾险有什么区别？”| “意外险和寿险哪个更重要？”）
- 首先明确告知它们的定位关系（互补、或针对不同风险）。
- 使用对比列表，必须突出最核心的区别（如：赔付方式、保障目标、适用场景等）。
- 最后总结，说明如何从整体保障角度看待它们。
### 【澄清混淆型】（如“有了医保还需要医疗险吗？” | “重疾险是确诊即赔吗？”）
- 先肯定或澄清问题中的核心点。
- 然后分点详细解释两者的区别与联系，破除常见误解。
- 给出基于风险管理的客观结论。

## 内容规范
- **结构化**：优先使用编号列表（1️⃣、2️⃣）、分点（•）或清晰的段落分隔来组织内容。
- **语言**：口语化、易懂、绝对专业。用“报销看病费用”代替“补偿医疗支出”，用“一次性赔一笔钱”辅助解释“给付型”。
- **中立客观**：只进行知识普及。禁止使用“我建议您...”、“您的预算...”等个性化表述。所有结论应为普遍性结论。

## 输出格式
- 回复应是一个完整、独立的知识片段。
- 结尾不提出反问，不引导下一步操作。

# 示例（供模型学习风格与结构）

**用户输入：** “定期寿险和终身寿险有什么区别？”
**AI输出：**
定期寿险和终身寿险的核心区别在于保障期限和功能侧重：
1️⃣ **定期寿险**：
   - **保障期**：保障一段特定时期，如20年、30年或到60岁、70岁。
   - **特点**：在保障期内保费低廉，杠杆率高。主要目的是用最低的成本覆盖家庭责任最重时期（如房贷、子女教育）的身故风险。
   - **适用**：适合预算有限、家庭责任重的年轻人群。
2️⃣**终身寿险**：
   - **保障期**：保障终身，100%会赔付。
   - **特点**：因为必定赔付，所以保费较高。它除了提供基础保障，还兼具了财富传承和储蓄规划的功能。
   - **适用**：适合有遗产规划需求、希望强制储蓄并稳健增值的人群。

**用户输入：** “有了社保，还需要买商业医疗险吗？”
**AI输出：**
社保（医保）是非常重要的基础保障，但和商业医疗险是互补关系，原因如下：
1️⃣ **保障范围不同**：社保报销有目录限制（药品、诊疗项目、服务设施），很多特效药、进口药、高端诊疗项目需要自费。商业医疗险能覆盖这些社保不报的部分。
2️⃣ **报销比例与额度不同**：社保有起付线和封顶线，不是100%报销。商业医疗险（尤其是百万医疗险）能有效补充报销，并提供更高的年度保额来应对大病风险。
3️⃣ **服务与资源不同**：部分商业医疗险还提供垫付医疗费、就医绿色通道等增值服务，能提升就医体验和效率。
所以，社保是“保基础”，商业医疗险是“作补充”，两者搭配才能更全面地转移医疗费用风险。
```
3. 输入提示词
```markdown 提示词
## 已知信息：
{{通用问题知识检索.data}}

## 用户问题：
{{global.query}}
```

4. 配置历史聊天记录为10。
5. 打开输出思考。
6. 打开返回内容。

**2.1.4.2.2.1.1指定回复节点：通用问题回答-分割线**
![](/images/demos/demos_24.png "")

在通用问题回答节点之后，添加一个指定回复节点，并命名为通用问题回答-分割线。

此节点的目的是为了分割展示内容。

1. 输入回复内容：---。
2. 打开返回内容。

**2.1.4.2.2.2指定回复节点：通用知识指定回答**
![](/images/demos/demos_25.png "")
在是否检索到相关通用知识节点之后，添加一个指定回复组件，并命名为通用知识指定回答。

此节点的目的是为了更好地告知用户检索结果。

1. 输入回复内容：未检索到相关内容。
2. 打开返回内容。


#### 2.2 问题扩写

**2.2.1 创建 LLM 节点：问题扩写**

在**开始**节点后（与`槽值信息提取`并行）添加另一个 **LLM** 节点，命名为 `问题扩写`。

**核心目标**：基于用户原问题，生成多个相关的扩展问题，以提升知识库检索效果。
![](/images/demos/demos_26.png "")
**配置节点**：
1.  选择模型：**qingqi-ins-4b**

- 因为业务是金融保险
- 此节点是根据提取出来的**产品名称**在知识库获取产品条款、健康告知、客户须知等产品资料交互大模型，所以数据量是相对轻量级的
- 4b回复快、链路短、 消耗token少，无需选择一个算力大的模型

2.  **输入系统角色**：（完整提示词定义了扩写原则与格式，此处从略，配置时请使用原文）。
3.  **输入提示词**：`## 用户问题：\n{{global.query}}`
4.  **历史聊天记录数**：`10`。
5.  **启用结构化输出**：打开"变量输出结构化输出"开关。
6.  **配置 JSON Schema**：使用提供的 Schema 定义输出为 `{"questions": ["string"]}` 格式。

**2.2.2 创建自定义函数节点：检索问题拼接**

在`问题扩写`节点后添加**自定义函数**节点，命名为 `检索问题拼接`，用于将扩展问题列表拼接为检索字符串。
![](/images/demos/demos_27.png "")
**配置节点**：
1.  **输入参数**：添加一个名为 `data`，数据类型为 `string` 的参数，必填。
2.  **参数来源**：选择 `问题扩写>AI回答内容`。
3.  **函数内容**：
```groovy 脚本
import com.endless4cloud.endless.seeker.app.api.util.JacksonUtil;
import com.endless4cloud.endless.seeker.app.service.functionlib.ScriptExecutor;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

class Script implements ScriptExecutor {
    @Override
    public Object execute(Map initContext) {
        String data = (String) initContext.get("data");
        Map dataMap = JacksonUtil.fromJson(data, Map.class);
        List<String> questions = (List<String>) dataMap.getOrDefault("questions", new ArrayList<>());
        String output = String.join("<|>", questions);
        return output;
    }
}
```
**2.2.3 连接至判断器**

将`检索问题拼接`节点的输出，连接到上述 **2.1.3** 步骤中的 `是否存在具体产品` 判断器节点，作为其上游输入之一。

## 步骤3：调试

您的工作流现已构建完成，请按以下步骤进行调试：

1.  **对照检查**：将您构建的工作流与教程开头提供的完整参考图进行对比，确保所有节点和连接都正确无误。
2.  **运行调试**：
    - 点击画布右上角的 **调试** 按钮。
    - 在弹出的调试面板输入框中，输入一个测试问题（例如："好医保的等待期是多久？"）。
    - 点击 **发送**，观察工作流的执行路径和每个节点的输出结果。
3.  **优化调整**：如果大模型的输出结果不符合预期，可以考虑：
    - 检查并优化相关 **LLM 节点**的**提示词（Prompt）**。
    - 调整**知识库检索**的参数（如 TOP K 值）。
    - 检查**判断器**节点的条件逻辑是否正确。

![](/images/demos/demos_28.png "")

## 步骤4：发布

一旦工作流按预期运行并且您对结果感到满意，即可将其发布上线。

1.  点击画布右上角的 **发布** 按钮。
2.  按照提示完成发布流程。

![](/images/demos/demos_29.png "")
![](/images/demos/demos_30.png "")

**重要提示**：发布后，如果对工作流进行了任何更改，必须再次点击 **发布**，才能使更新生效。发布后，建议在实时环境中进行一次快速的端到端测试，以确保线上效果与实验室调试环境一致。
