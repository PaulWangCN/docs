---
title: "智能代理"
icon: "robot"
---

**节点说明**：`智能代理`节点让您的大型语言模型自主控制工具，使其能够迭代决定使用哪些工具以及何时使用它们。智能代理不是预先规划每一步，而是动态地推理问题，根据需要调用工具来完成复杂任务。
![](/images/components/agent_1.png "")

## 智能代理策略
智能代理策略定义了您的智能代理如何思考和行动。选择最适合您的模型能力和任务需求的方法。
![](/images/components/agent_2.png "")

- **函数调用**（`FunctionCalling`）
使用大型语言模型的原生函数调用能力，通过工具参数直接传递工具定义。大型语言模型使用其内置机制决定何时以及如何调用工具。
- **推理与行动**（`ReAct`）
使用结构化提示词来引导大型语言模型通过明确的推理步骤。遵循**思维 → 行动 → 观察**循环进行透明的决策制定。
适用于可能没有原生函数调用能力的模型，或者当您需要明确推理轨迹时。
- **任务拆解** (`Planing`)
首先将用户问题拆解成多个子任务，再让子任务使遵循**思维 → 行动 → 观察**循环进行透明的决策制定，适合复杂问题推理。

## 配置

### 模型选择
选择支持您所选智能代理策略的大型语言模型。更强大的模型能更好地处理复杂推理，但每次迭代成本更高。如果使用函数调用策略，请确保您的模型支持函数调用。

### 工具配置
配置您的智能代理可以访问的工具。每个工具需要：
- **授权**：在工作空间中配置的外部服务的 API 密钥和凭据
- **描述**：清楚说明工具的作用以及何时使用它（这指导智能代理的决策制定）
- **参数**：工具接受的必需和可选输入，带有适当的验证

## 指令
使用自然语言指令定义智能代理的角色、目标和上下文。可以引用上游工作流节点的变量。

查询指定智能代理应该处理的用户输入或任务。这可以是来自先前工作流节点的动态内容。
![](/images/components/agent_3.png "")

## 执行控制
**最大迭代次数**设置安全限制以防止无限循环。根据任务复杂性进行配置 - 简单任务需要 `3`-`5` 次迭代，而复杂研究可能需要 `10`-`15` 次。

**记忆**控制智能代理使用 `TokenBufferMemory` 记提供更多上下文，但会增加标记成本。这使得对话连续性成为可能，用户可以引用以前的行动。


## 工具参数自动生成
工具可以将参数配置为**自动生成**或**手动输入**。自动生成的参数（`auto: false`）由智能代理自动填充，而手动输入参数需要明确的值，这些值成为工具永久配置的一部分。

## 输出变量
智能代理节点提供全面的输出，包括：
- **最终答案**：智能代理对查询的最终响应
- **工具输出**：执行期间每次工具调用的结果
- **推理轨迹**：逐步决策过程（推理与行动策略特别详细）在 `JSON` 输出中可用
- **迭代计数**：使用的推理循环次数
- **成功状态**：智能代理是否成功完成任务
- **智能代理日志**：带有元数据的结构化日志事件，用于调试和监控工具调用
